<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/movies.css}" type="text/css"/>
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/dd36616560.js"></script>
    <title>Movie Collection</title>
</head>
<body>
<div class="container">
    <!-- Header -->
    <div class="app-header">
        <h1 class="app-title">üé¨ MOVIE COLLECTION</h1>
    </div>

    <!-- Navbar with Logout -->
    <div class="navbar-custom d-flex justify-content-between align-items-center">
        <div>
            <span style="font-weight: 600; color: #666;">Welcome to your collection</span>
        </div>
        <form method="post" th:action="@{/logout}">
            <button class="btn-logout" type="submit">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </form>
    </div>

    <!-- Search Container -->
    <div class="search-container">
        <div class="row g-3 align-items-center">
            <div class="col-md-3">
                <select class="search-select form-select" id="search_type" name="Search type">
                    <option value="name">üîç Search by name</option>
                    <option value="category">üé≠ Search by category</option>
                    <option value="actor">‚≠ê Search by actors</option>
                </select>
            </div>
            <div class="col-md-4">
                <input class="search-input form-control" id="search_input" placeholder="Type to search..." type="text"/>
            </div>
            <div class="col-md-2">
                <button class="btn-search w-100" id="search_btn" type="button">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
            <div class="col-md-2">
                <button class="btn-clear w-100" id="search_clear_btn" type="button">
                    <i class="fas fa-times"></i> Clear
                </button>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-md-12">
                <label style="font-weight: 600; color: #666; margin-right: 10px;">Sort by:</label>
                <select class="search-select" id="order_type" name="Order by"
                        style="width: auto; display: inline-block;">
                    <option value="rating">‚≠ê Rating</option>
                    <option value="name">üìù Name</option>
                    <option value="date">üìÖ Release Date</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Movies Grid -->
    <div class="movies-grid">
            <th:block th:each="movie, iterStat:${movies}">
                <div class="movie-card">
                    <div onclick="window.location.href='/movies/' + [[${movie.id}]];" style="cursor: pointer;">
                        <img class="movie-poster" onerror="this.src='https://via.placeholder.com/320x400/667eea/ffffff?text=No+Image'" th:alt="${movie.name}"
                             th:src="${movie.image}"/>
                    </div>
                    <div class="movie-content">
                        <h3 class="movie-title" th:text="${movie.name}">Movie Title</h3>
                        <div class="movie-meta">
                            <span class="movie-category" th:text="${movie.category}">Category</span>
                            <span class="movie-rating">
                                <i class="fas fa-star"></i>
                                <span th:text="${movie.rating}">9.0</span>
                            </span>
                        </div>
                        <div class="movie-date">
                            <i class="far fa-calendar-alt"></i>
                            <span th:text="${#dates.format(movie.date, 'MMM dd, yyyy')}">Release Date</span>
                        </div>
                        <p class="movie-description" th:text="${movie.description}">
                            Movie description goes here...
                        </p>
                        <div class="movie-actions">
                            <button class="btn-edit" th:onclick="|window.location.href='/movies/update/${movie.id}';|">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn-delete"
                                    th:onclick="'javascript:deleteClicked(\'' + ${movie.id} + '\');'">
                                <i class="fas fa-trash-alt"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            </th:block>
    </div>

    <!-- Add Movie Button -->
    <div class="text-center mt-5 mb-5">
        <button class="btn-add-movie" onclick="window.location.href='/movies/cast'" type="button">
            <i class="fas fa-plus-circle"></i> Add New Movie
        </button>
    </div>
</div>

<script th:src="@{/js/movies.js}" type="text/javascript"></script>
<script crossorigin="anonymous" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"></script>
</body>
</html>
